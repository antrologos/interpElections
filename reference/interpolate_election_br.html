<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>One-step interpolation for Brazilian elections — interpolate_election_br • interpElections</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="One-step interpolation for Brazilian elections — interpolate_election_br"><meta name="description" content="High-level wrapper that auto-downloads census data, electoral data,
tract geometries, and OSM road networks, then runs the full optimization
and interpolation pipeline. The user only needs to provide an IBGE
municipality code (or name) and an election year."><meta property="og:description" content="High-level wrapper that auto-downloads census data, electoral data,
tract geometries, and OSM road networks, then runs the full optimization
and interpolation pipeline. The user only needs to provide an IBGE
municipality code (or name) and an election year."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">interpElections</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/get-started.html">Getting Started</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Technical</h6></li>
    <li><a class="dropdown-item" href="../articles/methodology.html">Methodology</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced</h6></li>
    <li><a class="dropdown-item" href="../articles/working-with-results.html">Working with Results</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/antrologos/interpElections/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>One-step interpolation for Brazilian elections</h1>
      <small class="dont-index">Source: <a href="https://github.com/antrologos/interpElections/blob/HEAD/R/brazil-wrapper.R" class="external-link"><code>R/brazil-wrapper.R</code></a></small>
      <div class="d-none name"><code>interpolate_election_br.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>High-level wrapper that auto-downloads census data, electoral data,
tract geometries, and OSM road networks, then runs the full optimization
and interpolation pipeline. The user only needs to provide an IBGE
municipality code (or name) and an election year.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">interpolate_election_br</span><span class="op">(</span></span>
<span>  <span class="va">code_muni</span>,</span>
<span>  uf <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">year</span>,</span>
<span>  comparecimento_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  votacao_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  network_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time_matrix <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cargo <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  turno <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  what <span class="op">=</span> <span class="st">"candidates"</span>,</span>
<span>  candidates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  parties <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  interp_sources <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  census_year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  clip_sf <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  remove_unpopulated <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  osm_buffer_km <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  osm_provider <span class="op">=</span> <span class="st">"openstreetmap_fr"</span>,</span>
<span>  point_method <span class="op">=</span> <span class="st">"point_on_surface"</span>,</span>
<span>  pop_raster <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pop_min_area <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  keep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  alpha <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  offset <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  use_gpu <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-code-muni">code_muni<a class="anchor" aria-label="anchor" href="#arg-code-muni"></a></dt>
<dd><p>Numeric or character. Either a 7-digit IBGE municipality
code (e.g., <code>3550308</code> for Sao Paulo) or a municipality <strong>name</strong> (e.g.,
<code>"Sao Paulo"</code>, <code>"SAO PAULO"</code>, <code>"São Paulo"</code>). Name matching is
case-insensitive, accent-insensitive, and whitespace-trimmed. If the
name exists in multiple states, use the <code>uf</code> parameter to disambiguate.
The TSE code and state abbreviation are resolved automatically from the
bundled <a href="muni_crosswalk.html">muni_crosswalk</a> table.</p></dd>


<dt id="arg-uf">uf<a class="anchor" aria-label="anchor" href="#arg-uf"></a></dt>
<dd><p>Character or NULL. Two-letter state abbreviation (e.g., <code>"SP"</code>,
<code>"RJ"</code>) for disambiguation when <code>code_muni</code> is a municipality name that
exists in multiple states. Case-insensitive. Ignored (with a message)
when <code>code_muni</code> is a numeric IBGE code. Default: <code>NULL</code>.</p></dd>


<dt id="arg-year">year<a class="anchor" aria-label="anchor" href="#arg-year"></a></dt>
<dd><p>Integer. Election year. Brazil holds two types of elections:</p><ul><li><p><strong>Municipal</strong> (even years divisible by 4): 2000, 2004, 2008, 2012,
2016, 2020, 2024. Offices: prefeito, vereador.</p></li>
<li><p><strong>General/federal</strong> (even years <em>not</em> divisible by 4): 2002, 2006,
2010, 2014, 2018, 2022. Offices: presidente, governador, senador,
deputado federal, deputado estadual.</p></li>
</ul></dd>


<dt id="arg-comparecimento-path">comparecimento_path<a class="anchor" aria-label="anchor" href="#arg-comparecimento-path"></a></dt>
<dd><p>Character or NULL. Path to attendance/turnout
parquet file. If NULL (the default), turnout is computed from the vote
data itself.</p></dd>


<dt id="arg-votacao-path">votacao_path<a class="anchor" aria-label="anchor" href="#arg-votacao-path"></a></dt>
<dd><p>Character or NULL. Path to candidate votes parquet
file. If NULL (the default), vote data is auto-downloaded from the
TSE open data portal.</p></dd>


<dt id="arg-network-path">network_path<a class="anchor" aria-label="anchor" href="#arg-network-path"></a></dt>
<dd><p>Character or NULL. Path to a directory containing an
OSM <code>.pbf</code> file for r5r routing. If NULL and <code>time_matrix</code> is also
NULL, OSM data is auto-downloaded via <code><a href="download_r5r_data.html">download_r5r_data()</a></code>.</p></dd>


<dt id="arg-time-matrix">time_matrix<a class="anchor" aria-label="anchor" href="#arg-time-matrix"></a></dt>
<dd><p>Numeric matrix or NULL. Pre-computed travel time
matrix [n x m]. If provided, skips all travel time computation
(no r5r, no OSM download). Useful for re-running with different
parameters on the same municipality.</p></dd>


<dt id="arg-cargo">cargo<a class="anchor" aria-label="anchor" href="#arg-cargo"></a></dt>
<dd><p>Integer, character, or NULL. Which electoral office(s) to
include. Accepts one or more human-readable aliases (case-insensitive)
or TSE numeric codes:</p><table class="table table"><tr><td>Alias</td><td>TSE code</td><td>Election type</td></tr><tr><td><code>"presidente"</code></td><td>1</td><td>General</td></tr><tr><td><code>"governador"</code></td><td>3</td><td>General</td></tr><tr><td><code>"senador"</code></td><td>5</td><td>General</td></tr><tr><td><code>"deputado_federal"</code></td><td>6</td><td>General</td></tr><tr><td><code>"deputado_estadual"</code></td><td>7</td><td>General</td></tr><tr><td><code>"deputado_distrital"</code></td><td>8</td><td>General (DF only)</td></tr><tr><td><code>"prefeito"</code></td><td>11</td><td>Municipal</td></tr><tr><td><code>"vereador"</code></td><td>13</td><td>Municipal</td></tr></table><p>When <code>NULL</code> (the default), <strong>all offices available</strong> for the election
year are included. When multiple cargos are selected, output columns
are prefixed with the office name (e.g., <code>PRESIDENTE_CAND_13</code>,
<code>GOVERNADOR_CAND_22</code>).</p></dd>


<dt id="arg-turno">turno<a class="anchor" aria-label="anchor" href="#arg-turno"></a></dt>
<dd><p>Integer. Election round: <code>1</code> (first round, the default) or
<code>2</code> (runoff). The first round always exists. The second round
(turno 2) is only held for presidente, governador, and prefeito
(in cities with &gt;200k voters), and only when no candidate wins an
outright majority. If turno 2 did not occur, the result will contain
zero vote rows for those offices.</p></dd>


<dt id="arg-what">what<a class="anchor" aria-label="anchor" href="#arg-what"></a></dt>
<dd><p>Character vector. Controls <strong>what information</strong> is
interpolated into census tracts. One or more of:</p><ul><li><p><code>"candidates"</code> <strong>(default)</strong>: Vote counts per candidate. Creates
one column per candidate, named <code>CAND_&lt;number&gt;</code> (e.g., <code>CAND_13</code>,
<code>CAND_22</code>). Also includes <code>QT_COMPARECIMENTO</code> (total turnout).</p></li>
<li><p><code>"parties"</code>: Vote counts aggregated by party. Creates one column
per party, named <code>PARTY_&lt;abbreviation&gt;</code> (e.g., <code>PARTY_PT</code>,
<code>PARTY_PL</code>). Also includes <code>QT_COMPARECIMENTO</code>.</p></li>
<li><p><code>"turnout"</code>: Turnout and abstention. Creates <code>QT_COMPARECIMENTO</code>
(voters who showed up), <code>QT_APTOS</code> (eligible voters), and
<code>QT_ABSTENCOES</code> (abstentions), when available.</p></li>
<li><p><code>"demographics"</code>: Voter profile demographics. Creates <code>GENERO_*</code>
columns (e.g., <code>GENERO_FEMININO</code>, <code>GENERO_MASCULINO</code>) and
<code>EDUC_*</code> columns (e.g., <code>EDUC_SUP_COMP</code>, <code>EDUC_FUND_INCOMP</code>).</p></li>
</ul><p>Multiple values can be combined:
<code>what = c("candidates", "parties", "turnout", "demographics")</code>.</p></dd>


<dt id="arg-candidates">candidates<a class="anchor" aria-label="anchor" href="#arg-candidates"></a></dt>
<dd><p>Character or numeric vector, or NULL. Filter specific
candidates (only used when <code>"candidates" %in% what</code>):</p><ul><li><p><strong>By number</strong> (numeric): Matches the candidate's ballot number
exactly. Example: <code>candidates = c(13, 22)</code> keeps only candidates
13 (Lula) and 22 (Bolsonaro) in 2022.</p></li>
<li><p><strong>By name</strong> (character): Performs accent-normalized,
case-insensitive substring matching against the candidate's
registered name. Example: <code>candidates = "LULA"</code> matches
"LUIZ INACIO LULA DA SILVA".</p></li>
<li><p><code>NULL</code> <strong>(default)</strong>: All candidates are included (including
special codes 95 = votos em branco, 96 = votos nulos).</p></li>
</ul></dd>


<dt id="arg-parties">parties<a class="anchor" aria-label="anchor" href="#arg-parties"></a></dt>
<dd><p>Character vector or NULL. Filter specific parties
(only used when <code>"parties" %in% what</code>). Uses official TSE party
abbreviations, matched case-insensitively:</p><ul><li><p>Example: <code>parties = c("PT", "PL")</code> keeps only PT and PL.</p></li>
<li><p><code>NULL</code> <strong>(default)</strong>: All parties are included.</p></li>
</ul></dd>


<dt id="arg-interp-sources">interp_sources<a class="anchor" aria-label="anchor" href="#arg-interp-sources"></a></dt>
<dd><p>Character vector or NULL. Column names from the
electoral data to interpolate. Default <code>NULL</code> auto-selects based on
<code>what</code>. Override this only if you need fine-grained control over
which columns are interpolated.</p></dd>


<dt id="arg-census-year">census_year<a class="anchor" aria-label="anchor" href="#arg-census-year"></a></dt>
<dd><p>Integer or NULL. Census year for population data
(2000, 2010, or 2022). If <code>NULL</code> (the default), auto-selected based
on the election year:</p><ul><li><p>Elections 2000-2004 use Census 2000</p></li>
<li><p>Elections 2008-2016 use Census 2010</p></li>
<li><p>Elections 2020+ use Census 2022</p></li>
</ul></dd>


<dt id="arg-clip-sf">clip_sf<a class="anchor" aria-label="anchor" href="#arg-clip-sf"></a></dt>
<dd><p><code>sf</code> polygon or NULL. Optional geometry to clip tracts
(e.g., an urban area boundary). Tracts outside this polygon are
removed before interpolation.</p></dd>


<dt id="arg-remove-unpopulated">remove_unpopulated<a class="anchor" aria-label="anchor" href="#arg-remove-unpopulated"></a></dt>
<dd><p>Logical. Remove zero-population tracts.
Default: TRUE.</p></dd>


<dt id="arg-osm-buffer-km">osm_buffer_km<a class="anchor" aria-label="anchor" href="#arg-osm-buffer-km"></a></dt>
<dd><p>Numeric. Buffer in km for OSM bounding box
expansion. Default: 10.</p></dd>


<dt id="arg-osm-provider">osm_provider<a class="anchor" aria-label="anchor" href="#arg-osm-provider"></a></dt>
<dd><p>Character. OSM extract provider for <code>osmextract</code>.
Default: <code>"openstreetmap_fr"</code> (has state-level extracts for Brazil).
Alternatives: <code>"geofabrik"</code>, <code>"bbbike"</code>. Only used when OSM data is
auto-downloaded (no <code>network_path</code> or <code>time_matrix</code> provided).</p></dd>


<dt id="arg-point-method">point_method<a class="anchor" aria-label="anchor" href="#arg-point-method"></a></dt>
<dd><p>Character. Method for computing representative points
for census tracts. One of <code>"point_on_surface"</code> (default, guaranteed
inside polygon), <code>"centroid"</code>, or <code>"pop_weighted"</code> (uses WorldPop
raster for large tracts). See <code><a href="compute_representative_points.html">compute_representative_points()</a></code>.</p></dd>


<dt id="arg-pop-raster">pop_raster<a class="anchor" aria-label="anchor" href="#arg-pop-raster"></a></dt>
<dd><p>A <a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">terra::SpatRaster</a>, file path, or <code>NULL</code>. Population
density raster for <code>point_method = "pop_weighted"</code>. If <code>NULL</code>, WorldPop
Brazil Constrained 2020 (~48 MB) is auto-downloaded.</p></dd>


<dt id="arg-pop-min-area">pop_min_area<a class="anchor" aria-label="anchor" href="#arg-pop-min-area"></a></dt>
<dd><p>Numeric. Minimum tract area (km²) for applying the
population-weighted method. Smaller tracts use <code>point_on_surface</code>.
Default: 1.</p></dd>


<dt id="arg-keep">keep<a class="anchor" aria-label="anchor" href="#arg-keep"></a></dt>
<dd><p>Character vector or NULL. Names of heavy intermediate
objects to include in the result. Default NULL (lightweight).
Options: <code>"weights"</code>, <code>"time_matrix"</code>, <code>"sources_sf"</code>,
<code>"pop_raster"</code>, <code>"rep_points"</code>. See <code><a href="interpolate_election.html">interpolate_election()</a></code> for details.</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>Numeric vector or NULL. Pre-computed decay parameters
(one per tract). If provided, the optimization step is skipped
entirely. Useful for re-interpolating with a previously optimized
alpha.</p></dd>


<dt id="arg-offset">offset<a class="anchor" aria-label="anchor" href="#arg-offset"></a></dt>
<dd><p>Numeric. Travel time offset. Default: 1.</p></dd>


<dt id="arg-use-gpu">use_gpu<a class="anchor" aria-label="anchor" href="#arg-use-gpu"></a></dt>
<dd><p>Logical or NULL. Passed to <code><a href="optimize_alpha.html">optimize_alpha()</a></code>.</p></dd>


<dt id="arg-cache">cache<a class="anchor" aria-label="anchor" href="#arg-cache"></a></dt>
<dd><p>Logical. If TRUE (default), downloaded files (TSE data,
OSM networks, census tracts) are stored persistently across R sessions.
See <code><a href="get_interpElections_cache_dir.html">get_interpElections_cache_dir()</a></code>. Subsequent calls reuse cached files,
making re-runs much faster.</p></dd>


<dt id="arg-force">force<a class="anchor" aria-label="anchor" href="#arg-force"></a></dt>
<dd><p>Logical. Re-download even if cached file exists.
Default: FALSE.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical. Default: TRUE.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments forwarded to <code><a href="interpolate_election.html">interpolate_election()</a></code>,
<code><a href="optimize_alpha.html">optimize_alpha()</a></code>, <code><a href="compute_travel_times.html">compute_travel_times()</a></code>, and/or
<code><a href="download_r5r_data.html">download_r5r_data()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of class <code>"interpElections_result"</code> with components:</p><dl><dt>interpolated</dt>
<dd><p>Numeric matrix [n x p]. Rows = census tracts,
columns = interpolated variables.</p></dd>

<dt>alpha</dt>
<dd><p>Numeric vector of length n. Optimized decay parameters.</p></dd>

<dt>tracts_sf</dt>
<dd><p><code>sf</code> object with interpolated columns joined in,
ready for mapping with <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> or <code>ggplot2</code>.</p></dd>

<dt>sources</dt>
<dd><p>Data frame of prepared electoral data (one row
per voting location), without geometry.</p></dd>

<dt>optimization</dt>
<dd><p><code>interpElections_optim</code> or NULL (if alpha was
pre-supplied).</p></dd>

<dt>offset</dt>
<dd><p>Numeric. Offset value used.</p></dd>

<dt>call</dt>
<dd><p>The matched call.</p></dd>

<dt>tract_id</dt>
<dd><p>Character. Name of census tract ID column.</p></dd>

<dt>point_id</dt>
<dd><p>Character. Name of source point ID column.</p></dd>

<dt>interp_cols</dt>
<dd><p>Character vector. Names of interpolated columns.</p></dd>

<dt>calib_cols</dt>
<dd><p>List with <code>$tracts</code> and <code>$sources</code> calibration columns.</p></dd>

<dt>weights</dt>
<dd><p>Numeric matrix or NULL. Present only when
<code>keep</code> includes <code>"weights"</code>.</p></dd>

<dt>time_matrix</dt>
<dd><p>Numeric matrix or NULL. Present only when
<code>keep</code> includes <code>"time_matrix"</code>.</p></dd>

<dt>sources_sf</dt>
<dd><p><code>sf</code> point object or NULL. Present only when
<code>keep</code> includes <code>"sources_sf"</code>.</p></dd>

<dt>code_muni</dt>
<dd><p>IBGE municipality code.</p></dd>

<dt>year</dt>
<dd><p>Election year.</p></dd>

<dt>census_year</dt>
<dd><p>Census year.</p></dd>

<dt>what</dt>
<dd><p>Character vector of data types interpolated.</p></dd>

<dt>pop_data</dt>
<dd><p>Data frame of census population by tract.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Internally calls <code><a href="interpolate_election.html">interpolate_election()</a></code> after preparing all inputs.</p>
    </div>
    <div class="section level2">
    <h2 id="election-types">Election types<a class="anchor" aria-label="anchor" href="#election-types"></a></h2>



<p>Brazil holds elections every two years, alternating between municipal
and general (federal/state) elections:</p><ul><li><p><strong>Municipal elections</strong> (2000, 2004, 2008, 2012, 2016, 2020, 2024):
elect prefeito (mayor) and vereador (city councilor).</p></li>
<li><p><strong>General elections</strong> (2002, 2006, 2010, 2014, 2018, 2022): elect
presidente, governador, senador, deputado federal, and deputado
estadual.</p></li>
</ul><p>Presidential vote data is published by the TSE in a separate national
file (~250 MB). This function handles the download automatically
when <code>cargo</code> includes <code>"presidente"</code> or when <code>cargo = NULL</code> in a
general election year.</p>
    </div>
    <div class="section level2">
    <h2 id="output-columns">Output columns<a class="anchor" aria-label="anchor" href="#output-columns"></a></h2>



<p>The <code>tracts_sf</code> output contains the original census tract geometry plus
interpolated columns. Column names follow these patterns:</p>
<dl><dt><code>CAND_&lt;number&gt;</code></dt>
<dd><p>Interpolated vote count for candidate with
ballot number <code>&lt;number&gt;</code>. Special numbers: 95 = blank votes
(em branco), 96 = null votes (nulo).</p></dd>

<dt><code>PARTY_&lt;abbrev&gt;</code></dt>
<dd><p>Interpolated total votes for party
<code>&lt;abbrev&gt;</code> (e.g., <code>PARTY_PT</code>, <code>PARTY_PL</code>).</p></dd>

<dt><code>GENERO_&lt;category&gt;</code></dt>
<dd><p>Interpolated voter count by gender
(e.g., <code>GENERO_FEMININO</code>, <code>GENERO_MASCULINO</code>).</p></dd>

<dt><code>EDUC_&lt;level&gt;</code></dt>
<dd><p>Interpolated voter count by education level
(e.g., <code>EDUC_SUP_COMP</code>, <code>EDUC_FUND_INCOMP</code>).</p></dd>

<dt><code>QT_COMPARECIMENTO</code></dt>
<dd><p>Total voters who showed up.</p></dd>

<dt><code>QT_APTOS</code></dt>
<dd><p>Total eligible voters (when available).</p></dd>

<dt><code>QT_ABSTENCOES</code></dt>
<dd><p>Total abstentions (when available).</p></dd>


</dl><p>When multiple <code>cargo</code> values are selected, candidate and party columns
are prefixed: <code>PRESIDENTE_CAND_13</code>, <code>GOVERNADOR_PARTY_PT</code>, etc.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="interpolate_election.html">interpolate_election()</a></code> for the general-purpose wrapper,
<code><a href="br_prepare_population.html">br_prepare_population()</a></code>, <code><a href="br_prepare_electoral.html">br_prepare_electoral()</a></code>,
<code><a href="br_prepare_tracts.html">br_prepare_tracts()</a></code>.</p>
<p>Other wrappers:
<code><a href="interpolate_election.html">interpolate_election</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># ── Minimal usage ───────────────────────────────────────────────</span></span></span>
<span class="r-in"><span><span class="co"># Just an IBGE code + year. Everything else is auto-downloaded.</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3550308</span>,   <span class="co"># Sao Paulo</span></span></span>
<span class="r-in"><span>  year <span class="op">=</span> <span class="fl">2020</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The result includes an sf object ready for mapping</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">tracts_sf</span><span class="op">[</span><span class="st">"CAND_13"</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ── Choosing a specific cargo ───────────────────────────────────</span></span></span>
<span class="r-in"><span><span class="co"># Municipal election: only city councilors (vereador)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3170701</span>, year <span class="op">=</span> <span class="fl">2020</span>,</span></span>
<span class="r-in"><span>  cargo <span class="op">=</span> <span class="st">"vereador"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># General election: only the presidential race</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3170701</span>, year <span class="op">=</span> <span class="fl">2022</span>,</span></span>
<span class="r-in"><span>  cargo <span class="op">=</span> <span class="st">"presidente"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Multiple offices at once (columns are prefixed)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3170701</span>, year <span class="op">=</span> <span class="fl">2022</span>,</span></span>
<span class="r-in"><span>  cargo <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"presidente"</span>, <span class="st">"governador"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># -&gt; columns: PRESIDENTE_CAND_13, GOVERNADOR_CAND_30, ...</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ── Turno (election round) ─────────────────────────────────────</span></span></span>
<span class="r-in"><span><span class="co"># First round (default)</span></span></span>
<span class="r-in"><span><span class="va">r1</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3170701</span>, year <span class="op">=</span> <span class="fl">2022</span>,</span></span>
<span class="r-in"><span>  cargo <span class="op">=</span> <span class="st">"presidente"</span>, turno <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Runoff (second round) -- only 2 candidates</span></span></span>
<span class="r-in"><span><span class="va">r2</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3170701</span>, year <span class="op">=</span> <span class="fl">2022</span>,</span></span>
<span class="r-in"><span>  cargo <span class="op">=</span> <span class="st">"presidente"</span>, turno <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ── Choosing what to interpolate ───────────────────────────────</span></span></span>
<span class="r-in"><span><span class="co"># Party vote totals instead of individual candidates</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3170701</span>, year <span class="op">=</span> <span class="fl">2022</span>,</span></span>
<span class="r-in"><span>  cargo <span class="op">=</span> <span class="st">"governador"</span>,</span></span>
<span class="r-in"><span>  what <span class="op">=</span> <span class="st">"parties"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># -&gt; columns: PARTY_PT, PARTY_PL, PARTY_MDB, ...</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Voter demographics (gender + education)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3170701</span>, year <span class="op">=</span> <span class="fl">2022</span>,</span></span>
<span class="r-in"><span>  what <span class="op">=</span> <span class="st">"demographics"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># -&gt; columns: GENERO_FEMININO, EDUC_SUP_COMP, ...</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Turnout and abstention</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3170701</span>, year <span class="op">=</span> <span class="fl">2020</span>,</span></span>
<span class="r-in"><span>  cargo <span class="op">=</span> <span class="st">"prefeito"</span>,</span></span>
<span class="r-in"><span>  what <span class="op">=</span> <span class="st">"turnout"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># -&gt; columns: QT_COMPARECIMENTO, QT_APTOS, QT_ABSTENCOES</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Everything at once</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3170701</span>, year <span class="op">=</span> <span class="fl">2022</span>,</span></span>
<span class="r-in"><span>  cargo <span class="op">=</span> <span class="st">"governador"</span>,</span></span>
<span class="r-in"><span>  what <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"candidates"</span>, <span class="st">"parties"</span>, <span class="st">"turnout"</span>, <span class="st">"demographics"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ── Filtering candidates ───────────────────────────────────────</span></span></span>
<span class="r-in"><span><span class="co"># By ballot number</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3170701</span>, year <span class="op">=</span> <span class="fl">2022</span>,</span></span>
<span class="r-in"><span>  cargo <span class="op">=</span> <span class="st">"presidente"</span>,</span></span>
<span class="r-in"><span>  candidates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13</span>, <span class="fl">22</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># -&gt; only CAND_13 (Lula) and CAND_22 (Bolsonaro)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># By name (accent-insensitive substring search)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3170701</span>, year <span class="op">=</span> <span class="fl">2022</span>,</span></span>
<span class="r-in"><span>  cargo <span class="op">=</span> <span class="st">"presidente"</span>,</span></span>
<span class="r-in"><span>  candidates <span class="op">=</span> <span class="st">"LULA"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># -&gt; matches "LUIZ INACIO LULA DA SILVA"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ── Filtering parties ──────────────────────────────────────────</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3170701</span>, year <span class="op">=</span> <span class="fl">2022</span>,</span></span>
<span class="r-in"><span>  cargo <span class="op">=</span> <span class="st">"presidente"</span>,</span></span>
<span class="r-in"><span>  what <span class="op">=</span> <span class="st">"parties"</span>,</span></span>
<span class="r-in"><span>  parties <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PT"</span>, <span class="st">"PL"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># -&gt; only PARTY_PT and PARTY_PL</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ── Re-using a previous result ─────────────────────────────────</span></span></span>
<span class="r-in"><span><span class="co"># Keep the time_matrix for reuse (opt-in via keep)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3170701</span>, year <span class="op">=</span> <span class="fl">2022</span>,</span></span>
<span class="r-in"><span>  cargo <span class="op">=</span> <span class="st">"governador"</span>,</span></span>
<span class="r-in"><span>  keep <span class="op">=</span> <span class="st">"time_matrix"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Then reuse the alpha and travel time matrix</span></span></span>
<span class="r-in"><span><span class="va">result2</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3170701</span>, year <span class="op">=</span> <span class="fl">2022</span>,</span></span>
<span class="r-in"><span>  cargo <span class="op">=</span> <span class="st">"governador"</span>,</span></span>
<span class="r-in"><span>  what <span class="op">=</span> <span class="st">"parties"</span>,</span></span>
<span class="r-in"><span>  time_matrix <span class="op">=</span> <span class="va">result</span><span class="op">$</span><span class="va">time_matrix</span>,</span></span>
<span class="r-in"><span>  alpha <span class="op">=</span> <span class="va">result</span><span class="op">$</span><span class="va">alpha</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ── Pre-computed travel times (skip r5r) ───────────────────────</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">interpolate_election_br</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code_muni <span class="op">=</span> <span class="fl">3550308</span>, year <span class="op">=</span> <span class="fl">2020</span>,</span></span>
<span class="r-in"><span>  time_matrix <span class="op">=</span> <span class="va">my_tt_matrix</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rogerio Barbosa, Lucas Gelape.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

