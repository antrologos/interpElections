% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/r5r-setup.R
\name{setup_java}
\alias{setup_java}
\title{Download and configure Java 21 for r5r}
\usage{
setup_java(
  install_dir = file.path(tools::R_user_dir("interpElections", "data"), "java"),
  persist = interactive(),
  setup_rjava = TRUE,
  verbose = TRUE,
  .ask_consent = TRUE
)
}
\arguments{
\item{install_dir}{Character. Where to install Java if downloading.
Default uses \code{\link[tools:userdir]{tools::R_user_dir()}}.}

\item{persist}{Logical. Write \code{JAVA_HOME} to \verb{~/.Renviron} and set OS-level
environment variables. Default: TRUE in interactive sessions.}

\item{setup_rjava}{Logical. Whether to install/configure rJava.
Default: TRUE.}

\item{verbose}{Logical. Default: TRUE.}
}
\value{
Invisibly, the path to the JDK home directory.
}
\description{
One-call setup that detects existing Java installations, downloads JDK 21
if needed, configures environment variables at both the R session and OS
level, optionally installs and configures rJava, and verifies the setup.
}
\details{
The function performs the following steps:
\enumerate{
\item Asks for consent (interactive mode only)
\item Scans for existing Java installations on the system
\item Offers to remove incompatible (non-21) Java versions
\item Uses an existing Java 21 if found, or downloads Adoptium JDK 21
\item Configures \code{JAVA_HOME} and \code{PATH} for the current R session
\item Persists \code{JAVA_HOME} to \verb{~/.Renviron}
\item Sets \code{JAVA_HOME} at the OS level (Windows User env / shell config)
\item Adds JDK \verb{bin/} to the system PATH
\item Optionally installs and configures rJava
\item Runs a final verification
}

Even if Java 21 is already installed, calling \code{setup_java()} ensures
all configuration (env vars, PATH, rJava) is correctly wired up.
The function is idempotent: you can always call it to fix a broken
configuration without re-downloading.
}
\examples{
\dontrun{
setup_java()
setup_java(setup_rjava = FALSE)
}

}
\seealso{
\code{\link[=check_r5r]{check_r5r()}} to diagnose without changing anything,
\code{\link[=set_java_memory]{set_java_memory()}} to configure JVM heap size.
}
