% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/brazil-downloads.R
\name{br_download_geocode}
\alias{br_download_geocode}
\title{Download geocoded polling station data from TSE}
\usage{
br_download_geocode(
  year,
  uf = NULL,
  code_muni_tse = NULL,
  force = FALSE,
  cache = TRUE,
  verbose = TRUE
)
}
\arguments{
\item{year}{Integer. Election year (e.g., 2010, 2012, 2016, 2020).}

\item{uf}{Character or NULL. Two-letter state abbreviation. If
provided, filters results to this state.}

\item{code_muni_tse}{Character or NULL. 5-digit TSE municipality code.
If provided, filters results to this municipality only.}

\item{force}{Logical. Re-download even if cached file exists.
Default: FALSE.}

\item{cache}{Logical. If TRUE (default), downloaded files are stored
persistently. See \code{\link[=get_interpElections_cache_dir]{get_interpElections_cache_dir()}}.}

\item{verbose}{Logical. Default: TRUE.}
}
\value{
A data frame with one row per section per round, using the
original TSE column names. Returns \code{NULL} if no data is available
for the given year (e.g., before 2010). Key columns:
\describe{
\item{CD_MUNICIPIO}{TSE municipality code (5-digit)}
\item{NR_ZONA}{Electoral zone number}
\item{NR_LOCAL_VOTACAO}{Polling location number}
\item{NR_SECAO}{Section number}
\item{NR_LATITUDE}{Latitude of polling location (-1 if missing)}
\item{NR_LONGITUDE}{Longitude of polling location (-1 if missing)}
\item{NM_LOCAL_VOTACAO}{Name of polling location}
\item{DS_ENDERECO}{Address of polling location}
}
}
\description{
Downloads the official polling station location data (eleitorado por
local de votação) from the TSE open data portal. This file includes
geographic coordinates (\code{NR_LATITUDE}, \code{NR_LONGITUDE}) for polling
locations, along with voter counts and addresses.
}
\details{
TSE data is available from 2010 onward. For years before 2010 (e.g.,
2008), this function returns \code{NULL} so the caller can fall back to
alternative sources.

Data is downloaded from
\verb{https://cdn.tse.jus.br/estatistica/sead/odsele/eleitorado_locais_votacao/}.
Files are cached persistently by default and reused on subsequent
calls unless \code{force = TRUE}. Use \code{\link[=interpElections_cache]{interpElections_cache()}} to manage
cached files.

The CSV files use semicolon (\verb{;}) as delimiter and Latin-1 encoding.
Missing coordinates are stored as \code{-1} in the TSE data.
}
\seealso{
\code{\link[=br_prepare_electoral]{br_prepare_electoral()}} which uses this function internally
to geocode polling stations (with Hidalgo fallback for missing
coordinates), \code{\link[=interpElections_cache]{interpElections_cache()}} to manage cached downloads.

Other Brazil downloads: 
\code{\link{br_download_turnout}()},
\code{\link{br_download_votes}()}
}
\concept{Brazil downloads}
