% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/download-r5r.R
\name{download_r5r_data}
\alias{download_r5r_data}
\title{Download OSM and elevation data for r5r routing}
\usage{
download_r5r_data(
  area_sf,
  output_dir,
  osm = TRUE,
  elevation = FALSE,
  osm_provider = "geofabrik",
  osm_url = NULL,
  force = FALSE,
  verbose = TRUE
)
}
\arguments{
\item{area_sf}{An \code{sf} object defining the area of interest. Its bounding
box is used to select the appropriate OSM extract and to clip the
downloaded file.}

\item{output_dir}{Character. Directory to save downloaded files. Created
if it does not exist.}

\item{osm}{Logical. Download OpenStreetMap road network. Default: TRUE.}

\item{elevation}{Logical. Download elevation raster for more accurate
walking/cycling routing on hilly terrain. Default: FALSE.}

\item{osm_provider}{Character. OSM extract provider for \code{osmextract}.
Default: \code{"geofabrik"}. Alternatives: \code{"bbbike"},
\code{"openstreetmap_fr"}.}

\item{osm_url}{Character or NULL. Direct URL to the OSM \code{.pbf} extract.
When provided, skips the automatic \code{osmextract::oe_match()} step and
downloads from this URL directly. This is useful when \code{oe_match()}
selects an overly broad extract (e.g., country-level instead of
state-level). Default: NULL (auto-detect via \code{oe_match()}).}

\item{force}{Logical. Re-download even if files already exist.
Default: FALSE.}

\item{verbose}{Logical. Default: TRUE.}
}
\value{
A list with paths to downloaded files:
\describe{
\item{osm_pbf}{Character. Path to the OSM \code{.pbf} file (or NULL if
\code{osm = FALSE}).}
\item{elevation_tif}{Character. Path to the elevation \code{.tif} file
(or NULL if \code{elevation = FALSE}).}
\item{output_dir}{Character. The output directory path.}
}
}
\description{
Downloads the OpenStreetMap road network (\code{.pbf} file) and optionally
satellite elevation data needed to build an r5r routing network.
The output directory can be passed directly to \code{\link[=compute_travel_times]{compute_travel_times()}}
as \code{network_path}.
}
\details{
After downloading the provider extract (which may cover a whole state),
the \code{.pbf} file is clipped to the bounding box of \code{area_sf} using
\code{osmium} or \code{osmconvert} (if available on the system). This avoids
r5r's geographic extent limit (~975,000 km2).

Requires the \code{osmextract} package for OSM downloads and optionally
the \code{elevatr} package for elevation data. Both are suggested
dependencies of this package.

For clipping large OSM extracts, \code{osmium-tool} (recommended) or
\code{osmconvert} must be installed. If neither is found, the function
will interactively offer to install one via \code{\link[=setup_osmium]{setup_osmium()}} before
proceeding. In non-interactive mode, it stops with an actionable
error message. All dependency checks (R packages and clipping tools)
run at the start, before any downloads begin.
}
\seealso{
\code{\link[=compute_travel_times]{compute_travel_times()}} to use the downloaded data,
\code{\link[=setup_osmium]{setup_osmium()}} to install the required clipping tool.

Other spatial: 
\code{\link{areal_interpolate}()},
\code{\link{areal_weights}()},
\code{\link{compute_travel_times}()}
}
\concept{spatial}
