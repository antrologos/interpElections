% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/interpolate-wrapper.R
\name{interpolate_election}
\alias{interpolate_election}
\title{One-step IDW interpolation from source points to target zones}
\usage{
interpolate_election(
  tracts_sf,
  electoral_sf,
  zone_id,
  point_id,
  calib_zones,
  calib_sources,
  interp_sources = NULL,
  time_matrix = NULL,
  network_path = NULL,
  elevation_path = NULL,
  osm_buffer_km = 10,
  min_pop = 1,
  alpha = NULL,
  offset = 1,
  use_gpu = NULL,
  verbose = TRUE,
  ...
)
}
\arguments{
\item{tracts_sf}{An \code{sf} polygon object. Target zones (e.g., census tracts).}

\item{electoral_sf}{An \code{sf} point object. Source points (e.g., voting
locations).}

\item{zone_id}{Character. Name of the ID column in \code{tracts_sf}.}

\item{point_id}{Character. Name of the ID column in \code{electoral_sf}.}

\item{calib_zones}{Character vector. Column names in \code{tracts_sf} to use
as the calibration population matrix. Must match \code{calib_sources} in
length.}

\item{calib_sources}{Character vector. Column names in \code{electoral_sf} to
use as the source calibration matrix. Must match \code{calib_zones} in
length.}

\item{interp_sources}{Character vector or NULL. Column names in
\code{electoral_sf} to interpolate. Default NULL means all numeric columns
not in \code{calib_sources}.}

\item{time_matrix}{Numeric matrix [n x m] or NULL. Pre-computed travel
times. If provided, skips all travel time computation.}

\item{network_path}{Character or NULL. Path to directory with an OSM
\code{.pbf} file. If provided (and \code{time_matrix} is NULL), travel times
are computed directly without downloading OSM data.}

\item{elevation_path}{Character or NULL. Path to elevation \code{.tif} file
for r5r routing.}

\item{osm_buffer_km}{Numeric. Buffer in kilometers to expand the
bounding box when auto-downloading OSM data. Default: 10.}

\item{min_pop}{Numeric. Minimum total population in \code{calib_zones} for a
zone to be included. Default: 1.}

\item{alpha}{Numeric vector of length n, or NULL. Pre-computed decay
parameters. If provided, optimization is skipped.}

\item{offset}{Numeric. Travel time offset. Default: 1.}

\item{use_gpu}{Logical or NULL. Passed to \code{\link[=optimize_alpha]{optimize_alpha()}}.}

\item{verbose}{Logical. Print progress. Default: TRUE.}

\item{...}{Additional arguments forwarded to \code{\link[=optimize_alpha]{optimize_alpha()}},
\code{\link[=compute_travel_times]{compute_travel_times()}}, and/or \code{\link[=download_r5r_data]{download_r5r_data()}}.}
}
\value{
A list of class \code{"interpElections_result"} with components:
\describe{
\item{interpolated}{Numeric matrix [n x p]. Interpolated values.}
\item{alpha}{Numeric vector of length n. Decay parameters used.}
\item{weights}{Numeric matrix [n x m]. Column-standardized weight
matrix.}
\item{optimization}{\code{interpElections_optim} object, or NULL if \code{alpha} was
pre-supplied.}
\item{time_matrix}{Numeric matrix [n x m]. Travel times used.}
\item{offset}{Numeric. Offset value used.}
\item{call}{The matched call.}
}
}
\description{
High-level wrapper that combines travel-time computation (optional),
alpha optimization, and interpolation into a single call. If no travel
time matrix is provided, OSM road network data is automatically
downloaded and travel times are computed via r5r.
}
\examples{
\dontrun{
# Minimal: sf objects + column names (auto-downloads OSM)
result <- interpolate_election(
  tracts_sf    = census_tracts,
  electoral_sf = voting_stations,
  zone_id      = "code_tract",
  point_id     = "id",
  calib_zones  = c("pop_18_24", "pop_25_34"),
  calib_sources = c("voters_18_24", "voters_25_34")
)

# With pre-computed travel times (skip r5r)
result <- interpolate_election(
  tracts_sf    = census_tracts,
  electoral_sf = voting_stations,
  zone_id      = "code_tract",
  point_id     = "id",
  calib_zones  = c("pop_young", "pop_old"),
  calib_sources = c("voters_young", "voters_old"),
  time_matrix  = my_tt_matrix
)
}

}
\seealso{
\code{\link[=optimize_alpha]{optimize_alpha()}}, \code{\link[=idw_interpolate]{idw_interpolate()}},
\code{\link[=interpolate_election_br]{interpolate_election_br()}} for the Brazilian-specific wrapper.

Other wrappers: 
\code{\link{interpolate_election_br}()}
}
\concept{wrappers}
