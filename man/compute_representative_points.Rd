% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/representative-points.R
\name{compute_representative_points}
\alias{compute_representative_points}
\title{Compute representative points for census tracts}
\usage{
compute_representative_points(
  tracts_sf,
  method = c("point_on_surface", "centroid", "pop_weighted"),
  pop_raster = NULL,
  pop_min_area = 1,
  tract_id = "id",
  verbose = TRUE
)
}
\arguments{
\item{tracts_sf}{An \code{sf} polygon object containing census tract geometries.}

\item{method}{Character. Method for computing representative points:
\describe{
\item{\code{"point_on_surface"}}{(Default) Uses \code{\link[sf:geos_unary]{sf::st_point_on_surface()}}.
Guarantees the point falls inside the polygon, unlike centroids
which can fall outside concave shapes.}
\item{\code{"centroid"}}{Uses \code{\link[sf:geos_unary]{sf::st_centroid()}}. Classic geometric centroid.
May fall outside concave polygons.}
\item{\code{"pop_weighted"}}{Uses a population density raster (WorldPop
Constrained 2020 by default) to find the most populated cell within
each tract. Only applied to tracts with area >= \code{pop_min_area};
smaller tracts use \code{point_on_surface}. Requires the \code{terra} package.}
}}

\item{pop_raster}{A \link[terra:SpatRaster-class]{terra::SpatRaster} object, a file path to a GeoTIFF,
or \code{NULL}. Population density raster for \code{method = "pop_weighted"}.
If \code{NULL} (default), the WorldPop Brazil Constrained 2020 raster (~48 MB)
is downloaded automatically and cached. Ignored for other methods.}

\item{pop_min_area}{Numeric. Minimum tract area in km² for applying the
population-weighted method. Tracts smaller than this threshold use
\code{point_on_surface} instead. Default: 1 (km²). Only used when
\code{method = "pop_weighted"}.}

\item{tract_id}{Character. Name of the ID column in \code{tracts_sf}.
Default: \code{"id"}.}

\item{verbose}{Logical. Print progress messages? Default: \code{TRUE}.}
}
\value{
An \code{sf} POINT object in WGS84 (EPSG:4326) with one row per tract,
preserving the \code{tract_id} column. Carries an attribute \code{"point_method"}
recording which method was used.
}
\description{
Computes a single representative point for each census tract polygon.
Three methods are available: geometric point-on-surface (default),
centroid, or population-density-weighted using WorldPop raster data.
}
\examples{
\dontrun{
tracts <- br_prepare_tracts(code_muni = 3170701)
tracts$id <- tracts$code_tract

# Default: point on surface
pts <- compute_representative_points(tracts)

# Population-weighted for large tracts
pts_pop <- compute_representative_points(tracts, method = "pop_weighted")
}

}
