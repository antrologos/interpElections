% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/brazil-wrapper.R
\name{interpolate_election_br}
\alias{interpolate_election_br}
\title{Interpolate Brazilian election data into census tracts}
\usage{
interpolate_election_br(
  municipality,
  year,
  cargo = NULL,
  turno = 1L,
  what = "candidates",
  candidates = NULL,
  parties = NULL,
  uf = NULL,
  census_year = NULL,
  clip_tracts_sf = NULL,
  min_tract_pop = 1,
  time_matrix = NULL,
  max_epochs = 2000L,
  alpha_min = 1,
  mode = "WALK",
  gtfs_zip_path = NULL,
  max_trip_duration = 300L,
  point_method = "pop_weighted",
  min_area_for_pop_weight = 1,
  use_gpu = NULL,
  force = FALSE,
  keep = NULL,
  verbose = TRUE,
  ...
)
}
\arguments{
\item{municipality}{Numeric or character. Either a 7-digit IBGE
municipality code (e.g., \code{3550308} for Sao Paulo) or a municipality
\strong{name} (e.g., \code{"Sao Paulo"}, \code{"SÃ£o Paulo"}). Name matching is
case/accent-insensitive. Use \code{uf} to disambiguate if the name exists
in multiple states.}

\item{year}{Integer. Election year (even integer).}

\item{cargo}{Integer, character, or NULL. Electoral office(s). Accepts
aliases like \code{"presidente"}, \code{"vereador"} or TSE codes. NULL =
all offices for that year. See Details.}

\item{turno}{Integer. Election round: 1 (default) or 2 (runoff).}

\item{what}{Character vector. What to interpolate: \code{"candidates"}
(default), \code{"parties"}, \code{"turnout"}, \code{"demographics"}.
Multiple values can be combined.}

\item{candidates}{Character or numeric vector, or NULL. Filter
candidates by ballot number or name substring. Default: all.}

\item{parties}{Character vector or NULL. Filter parties by TSE
abbreviation (e.g., \code{c("PT", "PL")}). Default: all.}

\item{uf}{Two-letter state abbreviation for disambiguation when
\code{municipality} is a name. Default: NULL.}

\item{census_year}{Integer or NULL. Census year (2000, 2010, 2022).
NULL = auto-selected from election year.}

\item{clip_tracts_sf}{\code{sf} polygon or NULL. Clip tracts to this
geometry before interpolation.}

\item{min_tract_pop}{Minimum total population in a tract to include
it. Tracts below this are dropped. Default: 1.}

\item{time_matrix}{Pre-computed travel time matrix [n x m], or NULL.
If provided, skips routing (no r5r, no OSM download).}

\item{max_epochs}{Maximum optimizer epochs. Default: 2000.
See \code{\link[=optimize_alpha]{optimize_alpha()}}.}

\item{alpha_min}{Lower bound for decay parameters. Default: 1.
See \code{\link[=optimize_alpha]{optimize_alpha()}}.}

\item{mode}{Routing mode: \code{"WALK"} (default), \code{"BICYCLE"}, \code{"CAR"},
or transit combos like \code{"WALK;TRANSIT"}. See r5r docs.}

\item{gtfs_zip_path}{Path to a GTFS .zip file for transit routing,
or NULL. When provided and \code{departure_datetime} is not set, the
departure is auto-set to election day at 10 AM.}

\item{max_trip_duration}{Maximum trip duration in minutes. Also used
as fill value for unreachable pairs. Default: 300 (5h walking).}

\item{point_method}{Method for tract representative points:
\code{"pop_weighted"} (default, uses WorldPop raster),
\code{"point_on_surface"}, or \code{"centroid"}.
See \code{\link[=compute_representative_points]{compute_representative_points()}}.}

\item{min_area_for_pop_weight}{Minimum tract area in km2 for the
pop_weighted method. Smaller tracts fall back to point_on_surface.
Default: 1.}

\item{use_gpu}{TRUE/FALSE or NULL. If NULL (default), reads the
global option set via \code{\link[=use_gpu]{use_gpu()}}.}

\item{force}{Re-download all cached data. Default: FALSE.}

\item{keep}{Character vector of extra objects to include in the
result. \code{weights} and \code{time_matrix} are always kept.
Options: \code{"electoral_sf"}, \code{"pop_raster"}, \code{"rep_points"}.}

\item{verbose}{Print progress messages. Default: TRUE.}

\item{...}{Advanced tuning. See \link{interpElections-passthrough}.
Common: \code{network_path}, \code{cache} (default TRUE),
\code{osm_buffer_km} (default 10), \code{offset} (default 1).}
}
\value{
An \code{interpElections_result} list. Key fields:
\verb{$tracts_sf} (sf with interpolated columns),
\verb{$interpolated} (matrix [n x p]),
\verb{$alpha} (decay parameters),
\verb{$optimization} (optimizer details).
}
\description{
Downloads census data, electoral results, tract geometries, and road
networks automatically. Only requires a municipality identifier and
an election year. Internally calls \code{\link[=interpolate_election]{interpolate_election()}} after
preparing all inputs.
}
\section{Quick start}{

\preformatted{
result <- interpolate_election_br(3550308, 2022)
plot(result)
}
}

\section{Re-interpolation}{

Use \code{\link[=reinterpolate]{reinterpolate()}} to re-run with different candidates/parties
without recomputing travel times:
\preformatted{
result <- interpolate_election_br(3550308, 2022)
result2 <- reinterpolate(result, what = "parties")
}
}

\section{Advanced tuning via \code{...}}{

See \code{\link{interpElections-passthrough}} for all options.
}

\seealso{
\code{\link[=interpolate_election]{interpolate_election()}} for the general-purpose wrapper,
\code{\link[=reinterpolate]{reinterpolate()}} for quick re-runs,
\code{\link[=br_prepare_population]{br_prepare_population()}}, \code{\link[=br_prepare_electoral]{br_prepare_electoral()}},
\code{\link[=br_prepare_tracts]{br_prepare_tracts()}}.

Other wrappers: 
\code{\link{interpolate_election}()}
}
\concept{wrappers}
